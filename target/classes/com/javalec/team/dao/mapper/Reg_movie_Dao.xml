<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.javalec.team.dao.Reg_movie_Dao">
    
    <insert id="reg_movie" parameterType="hashmap">
    	insert into movie(m_code, m_date, m_title, m_intro, m_time, m_period, m_grade, m_genre, m_director, m_rate, m_position, m_pics) 
        values (movie_seq.nextval, #{m_date}, #{m_title}, #{m_intro}, #{m_time}, #{m_period}, #{m_grade}, #{m_genre}, #{m_director}, #{m_rate}, #{m_position}, #{m_pics})
    </insert>
    
    <select id="list" resultType="com.javalec.team.dto.MovieDto">
        select m_code, m_date, m_title, m_intro, m_time, m_period, m_grade, m_genre, m_director, m_rate, m_position, m_pics 
        from movie 
        order by m_date desc
    </select>
    
    <insert id="edit_movie" parameterType="hashmap">
    	update movie 
    	set m_date=#{m_date}, m_title=#{m_title}, m_intro=#{m_intro}, m_time=#{m_time}
    	  , m_period=#{m_period}, m_grade=#{m_grade}, m_genre=#{m_genre} 
    	  , m_director=#{m_director}, m_rate=#{m_rate}, m_position=#{m_position}, m_pics=#{m_pics}   
    	 where m_code=#{m_code}
    </insert>
    
    <select id="show" resultType="com.javalec.team.dto.MovieDto">
        select m_code, m_date, m_title, m_intro, m_time, m_period, m_grade, m_genre, m_director, m_rate, m_position, m_pics 
        from movie 
        where m_code=#{m_code}
    </select>
    
    <insert id="del_movie" parameterType="hashmap">
    	delete movie where m_code=#{m_code}
    </insert>



	<select id="list_sort" resultType="com.javalec.team.dto.MovieDto">
        select m_code, m_date, m_title, m_intro, m_time, m_period, m_grade, m_genre, m_director, m_rate, m_position, m_pics 
        from movie 
        order by ${sort}
    </select>
</mapper>